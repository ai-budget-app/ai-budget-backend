tags:
  - name: Auth
    description: Аутентификация и управление пользователями

paths:
  /api/auth/register:
    post:
      summary: Регистрация нового пользователя
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
                - name
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  minLength: 6
                  example: password123
                name:
                  type: string
                  minLength: 2
                  maxLength: 50
                  example: Иван Иванов
      responses:
        201:
          description: Пользователь успешно зарегистрирован
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        400:
          description: Ошибка валидации
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        409:
          description: Пользователь уже существует
  
  /api/auth/login:
    post:
      summary: Вход в систему
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: user@example.com
                password:
                  type: string
                  example: password123
      responses:
        200:
          description: Успешный вход
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        401:
          description: Неверные учетные данные
  
  /api/auth/me:
    get:
      summary: Получить информацию о текущем пользователе
      tags: [Auth]
      security:
        - bearerAuth: []
      responses:
        200:
          description: Информация о пользователе
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        401:
          description: Не авторизован
  
  /api/auth/profile:
    put:
      summary: Обновить профиль пользователя
      tags: [Auth]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                  format: email
      responses:
        200:
          description: Профиль обновлен
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        401:
          description: Не авторизован
  
  /api/auth/change-password:
    put:
      summary: Изменить пароль
      tags: [Auth]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - currentPassword
                - newPassword
              properties:
                currentPassword:
                  type: string
                newPassword:
                  type: string
                  minLength: 6
      responses:
        200:
          description: Пароль успешно изменен
        401:
          description: Не авторизован или неверный пароль
  
  /api/auth/account:
    delete:
      summary: Удалить аккаунт
      tags: [Auth]
      security:
        - bearerAuth: []
      responses:
        200:
          description: Аккаунт удален
        401:
          description: Не авторизован